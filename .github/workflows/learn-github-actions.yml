name: Pull-Request-Notification
on: [pull_request]
jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      
      - name: Set branch name
        id: branch-name
        run: echo "BRANCH_NAME=$(echo ${{ github.head_ref }} | sed 's/refs\/heads\///')" >> $GITHUB_ENV   

      - name: Discord Webhook Action for PR
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          embed-title: "ğŸš€ Nuevo Pull Request ğŸš€"
          embed-color: "16711680"
          embed-description: |            
            ğŸ‘¤ Usuario: ${{ github.event.pull_request.user.login }}
    
            ğŸ“œ Repositorio: ${{ github.event.repository.name }}

            ğŸ“ PR ID: #${{ github.event.pull_request.number }}

            ğŸ“¢ TÃ­tulo del PR: ${{ github.event.pull_request.title }}

            ğŸ”— URL del PR: ${{ github.event.pull_request.html_url }}

            ğŸ”€ Branch origin: ${{ env.BRANCH_NAME }}

            ğŸ” Cambios: [Ver Cambios](${{ github.event.pull_request._links.html.href }})

          embed-author-name: "${{ github.event.pull_request.user.login }}"
          embed-author-url: "${{ github.event.pull_request.user.html_url }}"
          embed-author-icon-url: "${{ github.event.pull_request.user.avatar_url }}"
          embed-title: "â˜ï¸ Para revisar"                                                                                                                                                                                                                                                   
          embed-description: "Por favor, revisen el pull request y dejen sus comentarios. Â¡Toda retroalimentaciÃ³n es bienvenida para asegurarse la calidad del cÃ³digo!"
